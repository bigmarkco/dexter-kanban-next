

===== app/components/kanban/TaskCard.tsx =====

"use client";

import { useState } from "react";
import type { Task } from "./useTasks";
import styles from "./TaskCard.module.css";

type TaskCardProps = {
  task: Task;
  onMoveLeft: () => void;
  onMoveRight: () => void;
  onArchive: () => void;
  onDelete: () => void;
  onUpdate: (title: string, description?: string) => void;
};

export default function TaskCard({
  task,
  onMoveLeft,
  onMoveRight,
  onArchive,
  onDelete,
  onUpdate,
}: TaskCardProps) {
  const [isEditing, setIsEditing] = useState(false);
  const [title, setTitle] = useState(task.title);
  const [description, setDescription] = useState(task.description || "");

  const handleSave = () => {
    if (!title.trim()) return;
    onUpdate(title, description);
    setIsEditing(false);
  };

  return (
    <article className={styles.card}>
      {isEditing ? (
        <div className={styles.editFields}>
          <input
            className={styles.input}
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            placeholder="Title"
          />
          <textarea
            className={styles.textarea}
            value={description}
            onChange={(e) => setDescription(e.target.value)}
            placeholder="Description"
            rows={3}
          />
        </div>
      ) : (
        <div className={styles.copy}>
          <h3 className={styles.title}>{task.title}</h3>
          {task.description ? <p className={styles.description}>{task.description}</p> : null}
        </div>
      )}

      <div className={styles.actions}>
        <div className={styles.moveGroup}>
          <button className={styles.ghostButton} type="button" onClick={onMoveLeft}>
            ←
          </button>
          <button className={styles.ghostButton} type="button" onClick={onMoveRight}>
            →
          </button>
        </div>
        <div className={styles.metaActions}>
          {isEditing ? (
            <>
              <button className={styles.primaryButton} type="button" onClick={handleSave}>
                Save
              </button>
              <button className={styles.ghostButton} type="button" onClick={() => setIsEditing(false)}>
                Cancel
              </button>
            </>
          ) : (
            <>
              <button className={styles.ghostButton} type="button" onClick={() => setIsEditing(true)}>
                Edit
              </button>
              <button className={styles.ghostButton} type="button" onClick={onArchive}>
                Archive
              </button>
            </>
          )}
          <button
            className={styles.dangerButton}
            type="button"
            onClick={() => {
              if (window.confirm("Delete this task?")) onDelete();
            }}
          >
            Delete
          </button>
        </div>
      </div>
    </article>
  );
}


===== app/components/kanban/TaskCard.module.css =====

.card {
  background: var(--bg);
  border: 1px solid rgba(0, 0, 0, 0.06);
  border-radius: 0.75rem;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  box-shadow: 0 0.125rem 0.375rem rgba(0, 0, 0, 0.04);
}

.copy {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.title {
  margin: 0;
  font-size: 1.1rem;
}

.description {
  margin: 0;
  color: rgba(11, 11, 11, 0.8);
}

.actions {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.moveGroup {
  display: flex;
  gap: 0.5rem;
}

.metaActions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.primaryButton,
.ghostButton,
.dangerButton {
  border: 1px solid transparent;
  border-radius: 0.5rem;
  padding: 0.55rem 0.85rem;
  background: var(--bg-soft);
  color: var(--text);
  cursor: pointer;
  transition: background 120ms ease, color 120ms ease, border-color 120ms ease;
}

.primaryButton {
  background: var(--brand-primary);
  color: #ffffff;
}

.dangerButton {
  border-color: rgba(179, 35, 124, 0.25);
  color: #b3237c;
}

.ghostButton:hover,
.dangerButton:hover,
.primaryButton:hover {
  background: var(--brand-primary-tint);
  color: var(--brand-primary);
}

.primaryButton:hover {
  background: var(--brand-primary);
  color: #ffffff;
  filter: brightness(1.05);
}

.dangerButton:hover {
  color: #b3237c;
}

.primaryButton:focus-visible,
.ghostButton:focus-visible,
.dangerButton:focus-visible {
  outline: 0.125rem solid var(--brand-primary);
  outline-offset: 0.1rem;
}

.editFields {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.input,
.textarea {
  width: 100%;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 0.5rem;
  padding: 0.75rem 0.875rem;
  font-size: 1rem;
  color: var(--text);
  background: var(--bg-soft);
}

.textarea {
  resize: vertical;
}

.input:focus-visible,
.textarea:focus-visible {
  outline: 0.125rem solid var(--brand-primary);
  outline-offset: 0.1rem;
  background: var(--bg);
}


===== app/components/kanban/Column.tsx =====

"use client";

import TaskCard from "./TaskCard";
import type { Task, TaskStatus } from "./useTasks";
import styles from "./Column.module.css";

type ColumnProps = {
  title: string;
  status: TaskStatus;
  tasks: Task[];
  onMove: (id: string, direction: "left" | "right") => void;
  onArchive: (id: string) => void;
  onDelete: (id: string) => void;
  onUpdate: (id: string, title: string, description?: string) => void;
};

export default function Column({
  title,
  status,
  tasks,
  onMove,
  onArchive,
  onDelete,
  onUpdate,
}: ColumnProps) {
  return (
    <section className={styles.column} data-status={status}>
      <header className={styles.header}>
        <h2 className={styles.title}>{title}</h2>
        <span className={styles.count}>{tasks.length}</span>
      </header>
      <div className={styles.list}>
        {tasks.map((task) => (
          <TaskCard
            key={task.id}
            task={task}
            onMoveLeft={() => onMove(task.id, "left")}
            onMoveRight={() => onMove(task.id, "right")}
            onArchive={() => onArchive(task.id)}
            onDelete={() => onDelete(task.id)}
            onUpdate={(nextTitle, nextDesc) => onUpdate(task.id, nextTitle, nextDesc)}
          />
        ))}
        {tasks.length === 0 ? <p className={styles.empty}>No tasks yet</p> : null}
      </div>
    </section>
  );
}


===== app/components/kanban/Column.module.css =====

.column {
  background: var(--bg-soft);
  border: 1px solid rgba(0, 0, 0, 0.05);
  border-radius: 0.75rem;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.title {
  margin: 0;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 2rem;
  padding: 0.25rem 0.5rem;
  border-radius: 999px;
  background: var(--brand-primary-tint);
  color: var(--brand-primary);
  font-weight: 600;
}

.list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.empty {
  margin: 0;
  color: rgba(11, 11, 11, 0.6);
  font-size: 0.95rem;
}


===== app/components/kanban/TaskForm.tsx =====

"use client";

import { useState } from "react";
import styles from "./TaskForm.module.css";

type TaskFormProps = {
  onAdd: (title: string, description?: string) => void;
};

export default function TaskForm({ onAdd }: TaskFormProps) {
  const [title, setTitle] = useState("");
  const [description, setDescription] = useState("");

  const handleSubmit = (event: React.FormEvent) => {
    event.preventDefault();
    if (!title.trim()) return;
    onAdd(title, description);
    setTitle("");
    setDescription("");
  };

  return (
    <form className={styles.form} onSubmit={handleSubmit}>
      <div className={styles.fields}>
        <input
          className={styles.input}
          type="text"
          placeholder="Task title"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          required
        />
        <textarea
          className={styles.textarea}
          placeholder="Description (optional)"
          value={description}
          onChange={(e) => setDescription(e.target.value)}
          rows={3}
        />
      </div>
      <div className={styles.actions}>
        <button className={styles.submit} type="submit">
          Add task
        </button>
      </div>
    </form>
  );
}


===== app/components/kanban/TaskForm.module.css =====

.form {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  background: var(--bg);
  border: 1px solid rgba(0, 0, 0, 0.06);
  border-radius: 0.75rem;
  padding: 1rem;
  box-shadow: 0 0.125rem 0.375rem rgba(0, 0, 0, 0.04);
}

.fields {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.input,
.textarea {
  width: 100%;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 0.5rem;
  padding: 0.75rem 0.875rem;
  font-size: 1rem;
  color: var(--text);
  background: var(--bg-soft);
}

.textarea {
  resize: vertical;
}

.input:focus-visible,
.textarea:focus-visible {
  outline: 0.125rem solid var(--brand-primary);
  outline-offset: 0.1rem;
  background: var(--bg);
}

.actions {
  display: flex;
  justify-content: flex-end;
}

.submit {
  border: none;
  border-radius: 0.5rem;
  background: var(--brand-primary);
  color: #ffffff;
  padding: 0.65rem 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.submit:hover {
  box-shadow: 0 0.25rem 0.65rem rgba(87, 35, 179, 0.25);
}

.submit:active {
  transform: translateY(0.05rem);
}

.submit:focus-visible {
  outline: 0.125rem solid var(--brand-primary);
  outline-offset: 0.1rem;
}


===== app/board/page.module.css =====

.board {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.columns {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
  gap: 1rem;
}
